#pragma checksum "E:\c# project\Blazor\BlazorECharts-master\Rakor.Blazor.ECharts.Demo\Pages\Candlestick\Candlestick1.razor" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "d94b0703b646ccd2ebbd9c0bf3a7b5d47ce3beb2"
// <auto-generated/>
#pragma warning disable 1591
namespace Demo.Pages.Candlestick
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Components;
#nullable restore
#line 1 "E:\c# project\Blazor\BlazorECharts-master\Rakor.Blazor.ECharts.Demo\_Imports.razor"
using System.Net.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "E:\c# project\Blazor\BlazorECharts-master\Rakor.Blazor.ECharts.Demo\_Imports.razor"
using Microsoft.AspNetCore.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "E:\c# project\Blazor\BlazorECharts-master\Rakor.Blazor.ECharts.Demo\_Imports.razor"
using Microsoft.AspNetCore.Components.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "E:\c# project\Blazor\BlazorECharts-master\Rakor.Blazor.ECharts.Demo\_Imports.razor"
using Microsoft.AspNetCore.Components.Forms;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "E:\c# project\Blazor\BlazorECharts-master\Rakor.Blazor.ECharts.Demo\_Imports.razor"
using Microsoft.AspNetCore.Components.Routing;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "E:\c# project\Blazor\BlazorECharts-master\Rakor.Blazor.ECharts.Demo\_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "E:\c# project\Blazor\BlazorECharts-master\Rakor.Blazor.ECharts.Demo\_Imports.razor"
using Microsoft.JSInterop;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "E:\c# project\Blazor\BlazorECharts-master\Rakor.Blazor.ECharts.Demo\_Imports.razor"
using Demo;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "E:\c# project\Blazor\BlazorECharts-master\Rakor.Blazor.ECharts.Demo\_Imports.razor"
using Demo.Pages;

#line default
#line hidden
#nullable disable
#nullable restore
#line 10 "E:\c# project\Blazor\BlazorECharts-master\Rakor.Blazor.ECharts.Demo\_Imports.razor"
using Demo.Shared;

#line default
#line hidden
#nullable disable
#nullable restore
#line 12 "E:\c# project\Blazor\BlazorECharts-master\Rakor.Blazor.ECharts.Demo\_Imports.razor"
using Blazui.Component;

#line default
#line hidden
#nullable disable
#nullable restore
#line 13 "E:\c# project\Blazor\BlazorECharts-master\Rakor.Blazor.ECharts.Demo\_Imports.razor"
using Blazui.Component.Container;

#line default
#line hidden
#nullable disable
#nullable restore
#line 14 "E:\c# project\Blazor\BlazorECharts-master\Rakor.Blazor.ECharts.Demo\_Imports.razor"
using Blazui.Component.Button;

#line default
#line hidden
#nullable disable
#nullable restore
#line 15 "E:\c# project\Blazor\BlazorECharts-master\Rakor.Blazor.ECharts.Demo\_Imports.razor"
using Blazui.Component.Dom;

#line default
#line hidden
#nullable disable
#nullable restore
#line 16 "E:\c# project\Blazor\BlazorECharts-master\Rakor.Blazor.ECharts.Demo\_Imports.razor"
using Blazui.Component.Dynamic;

#line default
#line hidden
#nullable disable
#nullable restore
#line 17 "E:\c# project\Blazor\BlazorECharts-master\Rakor.Blazor.ECharts.Demo\_Imports.razor"
using Blazui.Component.NavMenu;

#line default
#line hidden
#nullable disable
#nullable restore
#line 18 "E:\c# project\Blazor\BlazorECharts-master\Rakor.Blazor.ECharts.Demo\_Imports.razor"
using Blazui.Component.Input;

#line default
#line hidden
#nullable disable
#nullable restore
#line 19 "E:\c# project\Blazor\BlazorECharts-master\Rakor.Blazor.ECharts.Demo\_Imports.razor"
using Blazui.Component.Radio;

#line default
#line hidden
#nullable disable
#nullable restore
#line 20 "E:\c# project\Blazor\BlazorECharts-master\Rakor.Blazor.ECharts.Demo\_Imports.razor"
using Blazui.Component.Select;

#line default
#line hidden
#nullable disable
#nullable restore
#line 21 "E:\c# project\Blazor\BlazorECharts-master\Rakor.Blazor.ECharts.Demo\_Imports.razor"
using Blazui.Component.CheckBox;

#line default
#line hidden
#nullable disable
#nullable restore
#line 22 "E:\c# project\Blazor\BlazorECharts-master\Rakor.Blazor.ECharts.Demo\_Imports.razor"
using Blazui.Component.Switch;

#line default
#line hidden
#nullable disable
#nullable restore
#line 23 "E:\c# project\Blazor\BlazorECharts-master\Rakor.Blazor.ECharts.Demo\_Imports.razor"
using Blazui.Component.Table;

#line default
#line hidden
#nullable disable
#nullable restore
#line 24 "E:\c# project\Blazor\BlazorECharts-master\Rakor.Blazor.ECharts.Demo\_Imports.razor"
using Blazui.Component.Popup;

#line default
#line hidden
#nullable disable
#nullable restore
#line 25 "E:\c# project\Blazor\BlazorECharts-master\Rakor.Blazor.ECharts.Demo\_Imports.razor"
using Blazui.Component.Pagination;

#line default
#line hidden
#nullable disable
#nullable restore
#line 26 "E:\c# project\Blazor\BlazorECharts-master\Rakor.Blazor.ECharts.Demo\_Imports.razor"
using Blazui.Component.Form;

#line default
#line hidden
#nullable disable
#nullable restore
#line 28 "E:\c# project\Blazor\BlazorECharts-master\Rakor.Blazor.ECharts.Demo\_Imports.razor"
using Rakor.Blazor.ECharts.Component;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "E:\c# project\Blazor\BlazorECharts-master\Rakor.Blazor.ECharts.Demo\Pages\Candlestick\Candlestick1.razor"
using Rakor.Blazor.ECharts.Option;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "E:\c# project\Blazor\BlazorECharts-master\Rakor.Blazor.ECharts.Demo\Pages\Candlestick\Candlestick1.razor"
using Rakor.Blazor.ECharts;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "E:\c# project\Blazor\BlazorECharts-master\Rakor.Blazor.ECharts.Demo\Pages\Candlestick\Candlestick1.razor"
using Rakor.Blazor.ECharts.Option.Enum;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "E:\c# project\Blazor\BlazorECharts-master\Rakor.Blazor.ECharts.Demo\Pages\Candlestick\Candlestick1.razor"
using Rakor.Blazor.ECharts.Option.Series.Candlestick;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "E:\c# project\Blazor\BlazorECharts-master\Rakor.Blazor.ECharts.Demo\Pages\Candlestick\Candlestick1.razor"
using Rakor.Blazor.ECharts.Option.Series.Line;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "E:\c# project\Blazor\BlazorECharts-master\Rakor.Blazor.ECharts.Demo\Pages\Candlestick\Candlestick1.razor"
using Rakor.Blazor.ECharts.Option.Series.Bar;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "E:\c# project\Blazor\BlazorECharts-master\Rakor.Blazor.ECharts.Demo\Pages\Candlestick\Candlestick1.razor"
using Rakor.Blazor.ECharts.Option.Series;

#line default
#line hidden
#nullable disable
    [Microsoft.AspNetCore.Components.RouteAttribute("/k/k1")]
    public partial class Candlestick1 : Microsoft.AspNetCore.Components.ComponentBase
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
            __builder.OpenElement(0, "div");
            __builder.AddAttribute(1, "class", "container");
            __builder.OpenComponent<Blazui.Component.Form.BForm>(2);
            __builder.AddAttribute(3, "Inline", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Boolean>(
#nullable restore
#line 14 "E:\c# project\Blazor\BlazorECharts-master\Rakor.Blazor.ECharts.Demo\Pages\Candlestick\Candlestick1.razor"
                   true

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(4, "Style", "margin-top:10px");
            __builder.AddAttribute(5, "Value", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Object>(
#nullable restore
#line 14 "E:\c# project\Blazor\BlazorECharts-master\Rakor.Blazor.ECharts.Demo\Pages\Candlestick\Candlestick1.razor"
                                                                        value

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(6, "ChildContent", (Microsoft.AspNetCore.Components.RenderFragment)((__builder2) => {
                __builder2.OpenComponent<Blazui.Component.Form.BFormItem<string>>(7);
                __builder2.AddAttribute(8, "Label", "股票代码");
                __builder2.AddAttribute(9, "Name", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.String>(
#nullable restore
#line 15 "E:\c# project\Blazor\BlazorECharts-master\Rakor.Blazor.ECharts.Demo\Pages\Candlestick\Candlestick1.razor"
                                                       nameof(KDemoFormModel.Code)

#line default
#line hidden
#nullable disable
                ));
                __builder2.AddAttribute(10, "IsRequired", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Boolean>(
#nullable restore
#line 15 "E:\c# project\Blazor\BlazorECharts-master\Rakor.Blazor.ECharts.Demo\Pages\Candlestick\Candlestick1.razor"
                                                                                                true

#line default
#line hidden
#nullable disable
                ));
                __builder2.AddAttribute(11, "ChildContent", (Microsoft.AspNetCore.Components.RenderFragment)((__builder3) => {
                    __builder3.OpenComponent<Blazui.Component.Input.BInput<string>>(12);
                    __builder3.AddAttribute(13, "Style", "width:100px");
                    __builder3.CloseComponent();
                }
                ));
                __builder2.CloseComponent();
                __builder2.AddMarkupContent(14, "\n        ");
                __builder2.OpenComponent<Blazui.Component.Form.BFormItem<DateTime?>>(15);
                __builder2.AddAttribute(16, "Label", "起始日期");
                __builder2.AddAttribute(17, "Name", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.String>(
#nullable restore
#line 18 "E:\c# project\Blazor\BlazorECharts-master\Rakor.Blazor.ECharts.Demo\Pages\Candlestick\Candlestick1.razor"
                                                          nameof(KDemoFormModel.StartTime)

#line default
#line hidden
#nullable disable
                ));
                __builder2.AddAttribute(18, "ChildContent", (Microsoft.AspNetCore.Components.RenderFragment)((__builder3) => {
                    __builder3.OpenComponent<Blazui.Component.Input.BDatePicker>(19);
                    __builder3.AddAttribute(20, "IsClearable", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Boolean>(
#nullable restore
#line 19 "E:\c# project\Blazor\BlazorECharts-master\Rakor.Blazor.ECharts.Demo\Pages\Candlestick\Candlestick1.razor"
                                      true

#line default
#line hidden
#nullable disable
                    ));
                    __builder3.AddAttribute(21, "Style", "width:150px");
                    __builder3.CloseComponent();
                }
                ));
                __builder2.CloseComponent();
                __builder2.AddMarkupContent(22, "\n        ");
                __builder2.OpenComponent<Blazui.Component.Form.BFormItem<DateTime?>>(23);
                __builder2.AddAttribute(24, "Label", "结束日期");
                __builder2.AddAttribute(25, "Name", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.String>(
#nullable restore
#line 21 "E:\c# project\Blazor\BlazorECharts-master\Rakor.Blazor.ECharts.Demo\Pages\Candlestick\Candlestick1.razor"
                                                          nameof(KDemoFormModel.EndTime)

#line default
#line hidden
#nullable disable
                ));
                __builder2.AddAttribute(26, "ChildContent", (Microsoft.AspNetCore.Components.RenderFragment)((__builder3) => {
                    __builder3.OpenComponent<Blazui.Component.Input.BDatePicker>(27);
                    __builder3.AddAttribute(28, "IsClearable", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Boolean>(
#nullable restore
#line 22 "E:\c# project\Blazor\BlazorECharts-master\Rakor.Blazor.ECharts.Demo\Pages\Candlestick\Candlestick1.razor"
                                      true

#line default
#line hidden
#nullable disable
                    ));
                    __builder3.AddAttribute(29, "Style", "width:150px");
                    __builder3.CloseComponent();
                }
                ));
                __builder2.CloseComponent();
                __builder2.AddMarkupContent(30, "\n        ");
                __builder2.OpenComponent<Blazui.Component.Form.BFormItem<object>>(31);
                __builder2.AddAttribute(32, "ChildContent", (Microsoft.AspNetCore.Components.RenderFragment)((__builder3) => {
                    __builder3.OpenComponent<Blazui.Component.Button.BButton>(33);
                    __builder3.AddAttribute(34, "Type", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<Blazui.Component.Button.ButtonType>(
#nullable restore
#line 25 "E:\c# project\Blazor\BlazorECharts-master\Rakor.Blazor.ECharts.Demo\Pages\Candlestick\Candlestick1.razor"
                            ButtonType.Primary

#line default
#line hidden
#nullable disable
                    ));
                    __builder3.AddAttribute(35, "OnClick", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<Microsoft.AspNetCore.Components.EventCallback<Microsoft.AspNetCore.Components.Web.MouseEventArgs>>(Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 25 "E:\c# project\Blazor\BlazorECharts-master\Rakor.Blazor.ECharts.Demo\Pages\Candlestick\Candlestick1.razor"
                                                         e=>Submit()

#line default
#line hidden
#nullable disable
                    )));
                    __builder3.AddAttribute(36, "ChildContent", (Microsoft.AspNetCore.Components.RenderFragment)((__builder4) => {
                        __builder4.AddMarkupContent(37, "查询");
                    }
                    ));
                    __builder3.CloseComponent();
                    __builder3.AddMarkupContent(38, "\n            ");
                    __builder3.OpenComponent<Blazui.Component.Button.BButton>(39);
                    __builder3.AddAttribute(40, "OnClick", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<Microsoft.AspNetCore.Components.EventCallback<Microsoft.AspNetCore.Components.Web.MouseEventArgs>>(Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 26 "E:\c# project\Blazor\BlazorECharts-master\Rakor.Blazor.ECharts.Demo\Pages\Candlestick\Candlestick1.razor"
                              e=>Reset()

#line default
#line hidden
#nullable disable
                    )));
                    __builder3.AddAttribute(41, "ChildContent", (Microsoft.AspNetCore.Components.RenderFragment)((__builder4) => {
                        __builder4.AddMarkupContent(42, "重置");
                    }
                    ));
                    __builder3.CloseComponent();
                }
                ));
                __builder2.CloseComponent();
            }
            ));
            __builder.AddComponentReferenceCapture(43, (__value) => {
#nullable restore
#line 14 "E:\c# project\Blazor\BlazorECharts-master\Rakor.Blazor.ECharts.Demo\Pages\Candlestick\Candlestick1.razor"
                               demoForm = (Blazui.Component.Form.BForm)__value;

#line default
#line hidden
#nullable disable
            }
            );
            __builder.CloseComponent();
            __builder.AddMarkupContent(44, "\n    ");
            __builder.OpenComponent<Rakor.Blazor.ECharts.Component.ECandlestick>(45);
            __builder.AddAttribute(46, "Option", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<Rakor.Blazor.ECharts.Option.EChartsOption<System.Object>>(
#nullable restore
#line 29 "E:\c# project\Blazor\BlazorECharts-master\Rakor.Blazor.ECharts.Demo\Pages\Candlestick\Candlestick1.razor"
                           Option1

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(47, "Class", "chart-fill");
            __builder.AddAttribute(48, "AutoRender", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Boolean>(
#nullable restore
#line 29 "E:\c# project\Blazor\BlazorECharts-master\Rakor.Blazor.ECharts.Demo\Pages\Candlestick\Candlestick1.razor"
                                                                   false

#line default
#line hidden
#nullable disable
            ));
            __builder.AddComponentReferenceCapture(49, (__value) => {
#nullable restore
#line 29 "E:\c# project\Blazor\BlazorECharts-master\Rakor.Blazor.ECharts.Demo\Pages\Candlestick\Candlestick1.razor"
                                                                                k = (Rakor.Blazor.ECharts.Component.ECandlestick)__value;

#line default
#line hidden
#nullable disable
            }
            );
            __builder.CloseComponent();
            __builder.CloseElement();
        }
        #pragma warning restore 1998
#nullable restore
#line 32 "E:\c# project\Blazor\BlazorECharts-master\Rakor.Blazor.ECharts.Demo\Pages\Candlestick\Candlestick1.razor"
      
    private EChartsOption<object> Option1;
    private ECandlestick k;

    private void ShowData(string code, DateTime? start, DateTime? end)
    {
        if (code.StartsWith("6")) code = "sh." + code;
        else code = "sz." + code;
        if (start == null && end == null)
        {
            end = yesterday;
            start = yesterday.AddYears(-1);
        }
        else if (start == null)
        {
            start = end.Value.AddYears(-1);
        }
        else if (end == null)
        {
            end = start.Value.AddYears(1);
        }
        else
        {
            if (end.Value.Subtract(start.Value).TotalDays > 365)
            {
                Message.Show("时间跨度不能大于一年", MessageType.Error);
                return;
            }
        }
        string ip = "172.19.54.106";
#if DEBUG
        ip = "101.132.118.176";
#endif
        var info=Newtonsoft.Json.JsonConvert.DeserializeObject<List<StockInfo>>(HttpClient.GetStringAsync($"http://{ip}:8124/api/info/{code}").Result).FirstOrDefault();
        if (info == null)
        {
            Message.Show("未获取到股票信息，请确认代码是否正确。", MessageType.Error);
            return;
        }
        if (info.Type != 1)
        {
            Message.Show($"该代码所代表的【{info.Name}】不是股票。", MessageType.Error);
            return;
        }
        _=k.ShowLoadingAsync();
        var result = HttpClient.GetStringAsync($"http://{ip}:8124/api/kdata/{code}/{start.Value.ToString("yyyy-MM-dd")}/{end.Value.ToString("yyyy-MM-dd")}").Result;
        var stock = Newtonsoft.Json.JsonConvert.DeserializeObject<List<StockData>>(result);
        var category = stock.Select(item => item.Date);
        var values = stock.Select(item => new[] { item.Open, item.Close, item.Low, item.High, item.Amount });
        var values1 = values.ToList();
        var liTTM=stock.Select(item => item.PeTTM);
        var volumes = stock.Select((item, index) => new[] { index, item.Amount, item.Close >= item.Open ? 1 : -1 });
        string upColor = "#ec0000", downColor = "#00da3c";

        Option1 = new EChartsOption<object>()
        {
            Title = new Title() { Text = $"【{info.Name}】K线图" },
            BackgroundColor = "#fff",
            Animation = false,
            Legend = new Legend()
            {
                Left = "center",
                Data = new[] { "股价信息", "MA5", "MA10", "MA20", "MA30" }
            },
            Tooltip = new Tooltip()
            {
                Trigger = TooltipTrigger.Axis,
                AxisPointer = new TooltipAxisPointer() { Type = AxisPointerType.Cross },
                BackgroundColor = "rgba(245, 245, 245, 0.8)",
                BorderWidth = 1,
                BorderColor = "#ccc",
                Padding = 10,
                TextStyle = new TextStyle() { Color = "#000" },
                Position = "function (pos, params, el, elRect, size) {var obj = {top: 10};obj[['left', 'right'][+(pos[0] < size.viewSize[0] / 2)]] = 30;return obj;}".ToJRaw()
            },
            AxisPointer = new AxisPointer()
            {
                Link = new AxisPointerLink() { XAxisIndex = "all" },
                Label = new AxisPointerLabel() { BackgroundColor = "#777" }
            },
            Toolbox = new Toolbox()
            {
                Feature = new Feature()
                {
                    DataZoom = new FeatureDataZoom() { YAxisIndex = false },
                    Brush = new FeatureBrush() { Type = new List<BrushType>() { BrushType.LineX, BrushType.Clear } }
                }
            },
            Brush = new Brush()
            {
                XAxisIndex = "all",
                BrushLink = "all",
                OutOfBrush = new { colorAlpha = 0.1 }
            },
            VisualMap = new VisualMapPiecewise()
            {
                Show = false,
                SeriesIndex = 5,
                Dimension = 2,
                Pieces = new List<object>()
    {
                    new {value=1,color= upColor},
                    new {value=-1,color=downColor }
                }
            },
            Grid = new List<Grid>()
{
                new Grid(){Left="10%",Right="8%",Height="50%" },
                new Grid(){Left="10%",Right="8%",Top="60%",Height="20%" },
                new Grid(){Left="10%",Right="8%",Top="80%",Height="15%" }
            },
            XAxis = new List<XAxis>()
{
                new XAxis()
                {
                    Type=AxisType.Category,
                    Data=category,
                    Scale=true,
                    BoundaryGap=false,
                    AxisLine=new AxisLine(){ OnZero=false},
                    SplitLine=new SplitLine(){ Show=false},
                    SplitNumber=20,
                    Min="dataMin",
                    Max="dataMax",
                    AxisPointer=new AxisPointer(){Z=100 }
                },
                new XAxis()
                {
                    Type=AxisType.Category,
                    GridIndex=1,
                    Data=category,
                    Scale=true,
                    BoundaryGap=false,
                    AxisLine=new AxisLine(){ OnZero=false},
                    AxisTick=new AxisTick(){Show=false },
                    SplitLine=new SplitLine(){ Show=false},
                    AxisLabel=new AxisLabel(){ Show=false},
                    SplitNumber=20,
                    Min="dataMin",
                    Max="dataMax"
                },
                new XAxis()
                {
                    Type=AxisType.Category,
                    GridIndex=2,
                    Data=category,
                    Scale=true,
                    BoundaryGap=false,
                    AxisLine=new AxisLine(){ OnZero=false},
                    AxisTick=new AxisTick(){Show=false },
                    SplitLine=new SplitLine(){ Show=false},
                    AxisLabel=new AxisLabel(){ Show=false},
                    SplitNumber=20,
                    Min="dataMin",
                    Max="dataMax"
                }
            },
            YAxis = new List<YAxis>()
{
                new YAxis()
                {
                    Scale=true,
                    SplitArea=new SplitArea(){ Show=true}
                },
                new YAxis()
                {
                    Scale=true,
                    GridIndex=1,
                    SplitNumber=2,
                    AxisLabel=new AxisLabel(){ Show=false},
                    AxisLine=new AxisLine(){ Show=false},
                    AxisTick=new AxisTick(){ Show=false},
                    SplitLine=new SplitLine(){ Show=false},
                },
                new YAxis()
                {
                    Scale=true,
                    GridIndex=2,
                    SplitNumber=2,
                    AxisLabel=new AxisLabel(){ Show=false},
                    AxisLine=new AxisLine(){ Show=false},
                    AxisTick=new AxisTick(){ Show=false},
                    SplitLine=new SplitLine(){ Show=false},
                }
            },
            DataZoom = new List<object>()
{
                new DataZoomInside()
                {
                    XAxisIndex=new []{0,1,2 },
                    Start=70,
                    End=100
                },
                new DataZoomSlider()
                {
                    Show=true,
                    XAxisIndex=new []{0,1,2 },
                    Top="95%",
                    Start=70,
                    End=100
                }
            },
            Series = new List<object>()
    {
                new Candlestick()
                {
                    Name="股价信息",
                    Data=values,
                    ItemStyle=new ItemStyle(){Color=upColor,Color0=downColor,BorderColor="null".ToJRaw(),BorderColor0="null".ToJRaw() },
                    //Tooltip=new Tooltip()
                    //{
                    //    Formatter="function (param) {param = param[0];return ['Date: ' + param.name + '<hr size=1 style=\"margin: 3px 0\">','开盘价: ' + param.data[0] + '<br/>','收盘价: ' + param.data[1] + '<br/>','最低价: ' + param.data[2] + '<br/>','最高价: ' + param.data[3] + '<br/>'].join('');}".ToJRaw()
                    //}
                },
                new Line()
                {
                    Name="MA5",
                    Data=CalculateMA(5,values1),
                    Smooth=true,
                    LineStyle=new LineStyle(){Opacity=0.5 }
                },
                new Line()
                {
                    Name="MA10",
                    Data=CalculateMA(10,values1),
                    Smooth=true,
                    LineStyle=new LineStyle(){Opacity=0.5 }
                },
                new Line()
                {
                    Name="MA20",
                    Data=CalculateMA(20,values1),
                    Smooth=true,
                    LineStyle=new LineStyle(){Opacity=0.5 }
                },
                new Line()
                {
                    Name="MA30",
                    Data=CalculateMA(30,values1),
                    Smooth=true,
                    LineStyle=new LineStyle(){Opacity=0.5 }
                },
                new Bar()
                {
                    Name="成交额",
                    XAxisIndex=1,
                    YAxisIndex=1,
                    Data=volumes
                },
                new Line()
                {
                    Name="滚动市盈率",
                    Data=liTTM,
                    XAxisIndex=2,
                    YAxisIndex=2,
                    Smooth=true,
                    LineStyle=new LineStyle(){Opacity=0.5,Color="blue" }
                }
            }
        };

        _ = k.SetupOptionAsync(Option1, true);
        while (end.Value.DayOfWeek == DayOfWeek.Sunday || end.Value.DayOfWeek == DayOfWeek.Saturday)
        {
            end=end.Value.AddDays(-1);
        }
        DateTime t = end.Value.AddMonths(-1);
        while (t.DayOfWeek == DayOfWeek.Sunday || t.DayOfWeek == DayOfWeek.Saturday)
        {
            t=t.AddDays(1);
        }
        _ = k.ExecFuncAsync($"dispatchAction({{type: 'brush',areas: [{{brushType: 'lineX',coordRange: ['{t.ToString("yyyy-MM-dd")}', '{end.Value.ToString("yyyy-MM-dd")}'],xAxisIndex: 0}}]}});");
    }

    protected override void OnAfterRender(bool firstRender)
    {
        if (IsFirst) Submit();
        IsFirst = false;
    }

    private List<object> CalculateMA(int day, List<double[]> data)
    {
        List<object> list = new List<object>();
        for (int i = 0, count = data.Count(); i < count; i++)
        {
            if (i < day)
            {
                list.Add("-");
                continue;
            }
            double sum = 0;
            for (int j = 0; j < day; j++)
            {
                sum += data[i - j][1];
            }
            list.Add(Math.Round(sum / day, 3));
        }
        return list;
    }

    protected BForm demoForm;
    private bool IsFirst = true;
    internal KDemoFormModel value;
    DateTime yesterday = DateTime.Now.AddDays(-1);
    protected override void OnParametersSet()
    {
        base.OnParametersSet();
        value = new KDemoFormModel()
        {
            Code = "002024",
            StartTime = yesterday.AddYears(-1),
            EndTime = yesterday
        };
    }
    protected void Submit()
    {
        if (!demoForm.IsValid())
        {
            return;
        }
        var model = demoForm.GetValue<KDemoFormModel>();
        ShowData(model.Code, model.StartTime, model.EndTime);
    }
    protected void Reset()
    {
        demoForm.Reset();
        Submit();
    }
    public class KDemoFormModel
    {
        public string Code { set; get; }
        public DateTime? StartTime { set; get; }
        public DateTime? EndTime { set; get; }
    }

#line default
#line hidden
#nullable disable
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private MessageService Message { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private HttpClient HttpClient { get; set; }
    }
}
#pragma warning restore 1591
